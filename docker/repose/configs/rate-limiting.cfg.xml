<?xml version="1.0" encoding="UTF-8"?>

<!-- http://wiki.openrepose.org/display/REPOSE/Rate+Limiting+Filter -->
<rate-limiting datastore="distributed/hash-ring" overLimit-429-responseCode="true" use-capture-groups="false" xmlns="http://docs.rackspacecloud.com/repose/rate-limiting/v1.0">
    <!--
        Defines an endpoint with a matching regex to bind GET requests for
        returning live rate limiting information.
    -->
    <request-endpoint uri-regex="/v1\.0/[0-9]+/limits" include-absolute-limits="false" />

    <!-- Limits for all other requests -->
    <limit-group id="autoscale" groups="IP_Standard" default="true">
      <limit uri="/v1.0/execute/*" uri-regex="/v1\.0/execute/(.*)" http-methods="ALL" unit="SECOND" value="10" />
      <limit uri="/v1.0/tenantId/*" uri-regex="/v1\.0/([0-9]+)/.+" http-methods="ALL" unit="MINUTE" value="1000" />
    </limit-group>

    <!-- Limits for WhiteListed IPs -->
    <!--
    <limit-group id="unlimited" groups="IP_Super" default="false"/>
    -->

</rate-limiting>
